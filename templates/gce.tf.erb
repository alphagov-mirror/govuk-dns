variable "GOOGLE_ZONE_NAME" {
    description = "The zone to deploy DNS to"
}

variable "GOOGLE_DNS_NAME" {
    description = "FQDN of the zone to deploy to"
}

<% grouped_records.each do | record | %>
resource "google_dns_record_set" "<%= record['resource_title'] %>" {
  managed_zone = "${var.GOOGLE_ZONE_NAME}"
  name = "<%= record['subdomain'] %>.${var.GOOGLE_DNS_NAME}"
  type = "<%= record['record_type'] %>"
  ttl = "<%= record['ttl'] %>"
  # Create an array of strings of the data.
  rrdatas = ["<%= record['data'].join('", "') %>"]
}
<% end %>
